<%- partial ('partials/navbar.ejs') %>

<div class="container" ng-controller="userController" ng-init="init()">
  <div class="row">
    	<div class="col-lg-12">
    		<h2>Administrators CRUD Operations</h2>
    		<hr>

        <div class="ItemList-wrapper">

          <table cellpadding="0" cellspacing="0" class="table table-striped table-hover ">
              <tr>
                <th>Id</th>
                <th>
                  <a href="#" ng-click="sortType = 'firstName'; sortReverse = !sortReverse">Name</a>
                  <span ng-show="sortType == 'firstName' && !sortReverse" class="fa fa-caret-down"></span>
                  <span ng-show="sortType == 'firstName' && sortReverse" class="fa fa-caret-up"></span>
                </th>
                <th>Email</th>
                <th>Age</th>
                <th>Gender</th>
                <th>Logins</th>
                <th>Roles</th>
                <th>
                  <a href="#" ng-click="sortType = 'createdAt'; sortReverse = !sortReverse">Created At</a>
                  <span ng-show="sortType == 'createdAt' && !sortReverse" class="fa fa-caret-down"></span>
                  <span ng-show="sortType == 'createdAt' && sortReverse" class="fa fa-caret-up"></span>
                </th>
                <th>Action</th>
              </tr>
              <tr ng-repeat="(key, user) in data.users | orderBy:sortType:sortReverse">
                <td>{{ user._id }}</td>
                <td>{{ user.firstName }} {{ user.lastName }}</td>
                <td>{{ user.email }}</td>
                <td>{{ user.age }}</td>
                <td>{{ user.gender }}</td>
                <td>{{ user.logins }}</td>
                <td>{{ user.roles }}</td>
                <td>{{ user.createdAt }}</td>
                <td>
                    <button type="button" class="btn btn-primary" ng-click="editAdminForm(user._id, user.roles)">Edit</button>
                    <button type="button" class="btn btn-danger" ng-click="deleteUser(user._id)" ng-hide="data.loggedInUser.id == user._id">Delete</button>
                </td>
              </tr>
        </table>
        <button type="button" class="btn btn-primary pull-right" ng-click="createAdminForm()">Add New Admin</button>
        </div>

        <%- partial ('partials/userForm.ejs') %>

    	</div>
  </div>
</div>
